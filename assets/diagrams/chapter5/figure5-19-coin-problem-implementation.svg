<svg viewBox="0 0 800 650" xmlns="http://www.w3.org/2000/svg">
  <title>図5-19：コイン問題の実装</title>
  <desc>貪欲法によるコイン問題の解法実装と実行例を視覚的に説明する図</desc>
  
  <defs>
    <style>
      .title { font: 600 16px Inter, sans-serif; fill: #1F2937; }
      .section-title { font: 600 14px Inter, sans-serif; fill: #374151; }
      .step-title { font: 600 13px Inter, sans-serif; fill: #7C3AED; }
      .code-text { font: 500 11px 'Courier New', monospace; fill: #1F2937; }
      .comment-text { font: 400 10px 'Courier New', monospace; fill: #16A34A; }
      .result-text { font: 500 10px 'Courier New', monospace; fill: #DC2626; }
      .calculation-text { font: 600 11px Inter, sans-serif; fill: #059669; }
      .explanation-text { font: 400 10px Inter, sans-serif; fill: #6B7280; }
      .emoji { font: 400 16px Inter, sans-serif; }
      
      .algorithm-box { fill: #DBEAFE; stroke: #3B82F6; stroke-width: 2; }
      .example-box { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 2; }
      .step-box { fill: #F8FAFC; stroke: #CBD5E0; stroke-width: 1; }
      .code-block { fill: #F8FAFC; stroke: #CBD5E0; stroke-width: 1; }
      .result-block { fill: #ECFDF5; stroke: #22C55E; stroke-width: 1; }
      .coin-500 { fill: #FFD700; stroke: #B8860B; stroke-width: 2; }
      .coin-100 { fill: #C0C0C0; stroke: #808080; stroke-width: 2; }
      .coin-50 { fill: #CD7F32; stroke: #8B4513; stroke-width: 2; }
      .coin-10 { fill: #FFA500; stroke: #FF8C00; stroke-width: 2; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="650" fill="#FFFFFF"/>
  
  <!-- Title -->
  <text x="400" y="32" text-anchor="middle" class="title">図5-19：コイン問題の実装</text>
  
  <!-- Algorithm Implementation -->
  <g id="algorithm">
    <rect x="50" y="60" width="700" height="180" rx="8" class="algorithm-box"/>
    <text x="70" y="85" class="emoji">🪙</text>
    <text x="100" y="85" class="section-title" fill="#1E40AF">実装：最小コイン数の貪欲法</text>
    
    <g transform="translate(70, 105)">
      <rect x="0" y="0" width="660" height="120" class="code-block"/>
      <g transform="translate(15, 15)">
        <text x="0" y="0" class="code-text">def min_coins(target):</text>
        <text x="0" y="15" class="code-text">    coins = [500, 100, 50, 10, 1]</text>
        <text x="300" y="15" class="comment-text"># 大きい順に並べる</text>
        <text x="0" y="30" class="code-text">    count = 0</text>
        <text x="0" y="45" class="code-text">    result = []</text>
        <text x="0" y="65" class="code-text">    for coin in coins:</text>
        <text x="0" y="80" class="code-text">        if target >= coin:</text>
        <text x="0" y="95" class="code-text">            num_coins = target // coin</text>
        <text x="280" y="95" class="comment-text"># 何枚使えるか</text>
        <text x="0" y="110" class="code-text">            count += num_coins</text>
        
        <g transform="translate(400, 30)">
          <rect x="0" y="0" width="220" height="80" fill="#E0F2FE" stroke="#0369A1" stroke-width="1"/>
          <text x="10" y="15" class="step-title">貪欲法の戦略</text>
          <text x="10" y="30" class="explanation-text">1. 大きいコインから使う</text>
          <text x="10" y="45" class="explanation-text">2. 使える限り使う</text>
          <text x="10" y="60" class="explanation-text">3. 残りで次のコインを試す</text>
        </g>
      </g>
    </g>
  </g>
  
  <!-- Example Execution -->
  <g id="example">
    <rect x="50" y="260" width="700" height="280" rx="8" class="example-box"/>
    <text x="70" y="285" class="emoji">🧮</text>
    <text x="100" y="285" class="section-title" fill="#D97706">使用例：target = 890円</text>
    
    <!-- Step 1: 500円 -->
    <g transform="translate(70, 305)">
      <rect x="0" y="0" width="160" height="60" class="step-box"/>
      <text x="80" y="15" text-anchor="middle" class="step-title">Step 1</text>
      <text x="80" y="30" text-anchor="middle" class="code-text">target = 890</text>
      <text x="80" y="45" text-anchor="middle" class="calculation-text">890 ÷ 500 = 1枚</text>
      
      <!-- 500円コイン表示 -->
      <circle cx="20" cy="15" r="12" class="coin-500"/>
      <text x="20" y="20" text-anchor="middle" class="code-text">500</text>
      
      <text x="80" y="70" text-anchor="middle" class="explanation-text">残り: 890 - 500 = 390</text>
    </g>
    
    <!-- Step 2: 100円 -->
    <g transform="translate(250, 305)">
      <rect x="0" y="0" width="160" height="60" class="step-box"/>
      <text x="80" y="15" text-anchor="middle" class="step-title">Step 2</text>
      <text x="80" y="30" text-anchor="middle" class="code-text">target = 390</text>
      <text x="80" y="45" text-anchor="middle" class="calculation-text">390 ÷ 100 = 3枚</text>
      
      <!-- 100円コイン3枚 -->
      <circle cx="15" cy="15" r="10" class="coin-100"/>
      <text x="15" y="19" text-anchor="middle" class="code-text">100</text>
      <circle cx="30" cy="15" r="10" class="coin-100"/>
      <text x="30" y="19" text-anchor="middle" class="code-text">100</text>
      <circle cx="45" cy="15" r="10" class="coin-100"/>
      <text x="45" y="19" text-anchor="middle" class="code-text">100</text>
      
      <text x="80" y="70" text-anchor="middle" class="explanation-text">残り: 390 - 300 = 90</text>
    </g>
    
    <!-- Step 3: 50円 -->
    <g transform="translate(430, 305)">
      <rect x="0" y="0" width="160" height="60" class="step-box"/>
      <text x="80" y="15" text-anchor="middle" class="step-title">Step 3</text>
      <text x="80" y="30" text-anchor="middle" class="code-text">target = 90</text>
      <text x="80" y="45" text-anchor="middle" class="calculation-text">90 ÷ 50 = 1枚</text>
      
      <!-- 50円コイン -->
      <circle cx="20" cy="15" r="10" class="coin-50"/>
      <text x="20" y="19" text-anchor="middle" class="code-text">50</text>
      
      <text x="80" y="70" text-anchor="middle" class="explanation-text">残り: 90 - 50 = 40</text>
    </g>
    
    <!-- Step 4: 10円 -->
    <g transform="translate(610, 305)">
      <rect x="0" y="0" width="160" height="60" class="step-box"/>
      <text x="80" y="15" text-anchor="middle" class="step-title">Step 4</text>
      <text x="80" y="30" text-anchor="middle" class="code-text">target = 40</text>
      <text x="80" y="45" text-anchor="middle" class="calculation-text">40 ÷ 10 = 4枚</text>
      
      <!-- 10円コイン4枚 -->
      <circle cx="10" cy="15" r="8" class="coin-10"/>
      <text x="10" y="18" text-anchor="middle" class="code-text">10</text>
      <circle cx="25" cy="15" r="8" class="coin-10"/>
      <text x="25" y="18" text-anchor="middle" class="code-text">10</text>
      <circle cx="40" cy="15" r="8" class="coin-10"/>
      <text x="40" y="18" text-anchor="middle" class="code-text">10</text>
      <circle cx="55" cy="15" r="8" class="coin-10"/>
      <text x="55" y="18" text-anchor="middle" class="code-text">10</text>
      
      <text x="80" y="70" text-anchor="middle" class="explanation-text">残り: 40 - 40 = 0</text>
    </g>
    
    <!-- Result -->
    <g transform="translate(70, 385)">
      <rect x="0" y="0" width="660" height="120" class="result-block"/>
      <text x="15" y="20" class="result-text">出力結果：</text>
      <text x="15" y="35" class="code-text">必要なコイン数: 9</text>
      <text x="15" y="50" class="code-text">500円硬貨: 1枚</text>
      <text x="15" y="65" class="code-text">100円硬貨: 3枚</text>
      <text x="15" y="80" class="code-text">50円硬貨: 1枚</text>
      <text x="15" y="95" class="code-text">10円硬貨: 4枚</text>
      
      <!-- Visual summary -->
      <g transform="translate(350, 20)">
        <rect x="0" y="0" width="280" height="80" fill="#E0F2FE" stroke="#0369A1" stroke-width="1"/>
        <text x="10" y="15" class="calculation-text">合計確認</text>
        <text x="10" y="30" class="explanation-text">500×1 + 100×3 + 50×1 + 10×4</text>
        <text x="10" y="45" class="explanation-text">= 500 + 300 + 50 + 40</text>
        <text x="10" y="60" class="calculation-text">= 890円 ✓</text>
        <text x="10" y="75" class="calculation-text">使用コイン数: 9枚</text>
      </g>
    </g>
  </g>
  
  <!-- Key Point -->
  <g id="key-point">
    <rect x="50" y="560" width="700" height="70" rx="8" fill="#F3F4F6" stroke="#9CA3AF" stroke-width="1"/>
    <text x="70" y="585" class="emoji">💡</text>
    <text x="100" y="585" class="section-title">日本のコインシステムでの貪欲法</text>
    
    <g transform="translate(100, 605)">
      <text x="0" y="15" class="explanation-text">日本の硬貨システム[1, 5, 10, 50, 100, 500]では、貪欲法が必ず最適解を与える</text>
      <text x="0" y="30" class="explanation-text">理由：各硬貨の価値が次の硬貨の倍数以上の関係にあるため</text>
    </g>
  </g>
  
</svg>