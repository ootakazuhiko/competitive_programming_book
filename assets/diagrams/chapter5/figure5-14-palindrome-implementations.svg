<svg viewBox="0 0 800 750" xmlns="http://www.w3.org/2000/svg">
  <title>図5-14：回文判定の様々な実装</title>
  <desc>基本的な回文判定から大文字小文字無視、記号無視、効率的な判定まで様々な回文判定実装パターンを示す図</desc>
  
  <defs>
    <style>
      .title { font: 600 16px Inter, sans-serif; fill: #1F2937; }
      .section-title { font: 600 14px Inter, sans-serif; fill: #374151; }
      .method-title { font: 600 13px Inter, sans-serif; }
      .code-text { font: 500 11px 'Courier New', monospace; fill: #1F2937; }
      .comment-text { font: 400 10px 'Courier New', monospace; fill: #16A34A; }
      .test-text { font: 500 10px 'Courier New', monospace; fill: #DC2626; }
      .result-text { font: 600 11px Inter, sans-serif; fill: #059669; }
      .explanation-text { font: 400 10px Inter, sans-serif; fill: #6B7280; }
      .emoji { font: 400 16px Inter, sans-serif; }
      
      .basic-box { fill: #DBEAFE; stroke: #3B82F6; stroke-width: 2; }
      .case-box { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 2; }
      .advanced-box { fill: #F3E8FF; stroke: #7C3AED; stroke-width: 2; }
      .efficient-box { fill: #DCFCE7; stroke: #22C55E; stroke-width: 2; }
      .code-block { fill: #F8FAFC; stroke: #CBD5E0; stroke-width: 1; }
      .test-block { fill: #FEE2E2; stroke: #DC2626; stroke-width: 1; }
      .result-block { fill: #DCFCE7; stroke: #22C55E; stroke-width: 1; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="750" fill="#FFFFFF"/>
  
  <!-- Title -->
  <text x="400" y="32" text-anchor="middle" class="title">図5-14：回文判定の様々な実装</text>
  
  <!-- Basic Implementation -->
  <g id="basic">
    <rect x="50" y="60" width="350" height="120" rx="8" class="basic-box"/>
    <text x="70" y="85" class="emoji">🔹</text>
    <text x="100" y="85" class="method-title" fill="#1E40AF">基本的な回文判定</text>
    
    <g transform="translate(70, 100)">
      <rect x="0" y="0" width="310" height="65" class="code-block"/>
      <g transform="translate(10, 15)">
        <text x="0" y="0" class="code-text">def is_palindrome_basic(s):</text>
        <text x="0" y="15" class="code-text">    return s == s[::-1]</text>
        <text x="0" y="35" class="comment-text"># テスト</text>
        <text x="0" y="50" class="test-text">print(is_palindrome_basic("racecar"))</text>
      </g>
    </g>
  </g>
  
  <!-- Case Insensitive -->
  <g id="case-insensitive">
    <rect x="420" y="60" width="330" height="120" rx="8" class="case-box"/>
    <text x="440" y="85" class="emoji">🔸</text>
    <text x="470" y="85" class="method-title" fill="#D97706">大文字小文字を無視</text>
    
    <g transform="translate(440, 100)">
      <rect x="0" y="0" width="290" height="65" class="code-block"/>
      <g transform="translate(10, 15)">
        <text x="0" y="0" class="code-text">def is_palindrome_ignore_case(s):</text>
        <text x="0" y="15" class="code-text">    s = s.lower()</text>
        <text x="0" y="30" class="code-text">    return s == s[::-1]</text>
        <text x="0" y="50" class="test-text">print(is_palindrome_ignore_case("Racecar"))</text>
      </g>
    </g>
  </g>
  
  <!-- Advanced Implementation -->
  <g id="advanced">
    <rect x="50" y="200" width="700" height="140" rx="8" class="advanced-box"/>
    <text x="70" y="225" class="emoji">🔮</text>
    <text x="100" y="225" class="method-title" fill="#7C3AED">空白・記号を無視する回文判定</text>
    
    <g transform="translate(70, 245)">
      <rect x="0" y="0" width="660" height="80" class="code-block"/>
      <g transform="translate(15, 15)">
        <text x="0" y="0" class="code-text">def is_palindrome_advanced(s):</text>
        <text x="0" y="15" class="comment-text">    # アルファベットのみを抽出</text>
        <text x="0" y="30" class="code-text">    clean = ''.join(c.lower() for c in s if c.isalpha())</text>
        <text x="0" y="45" class="code-text">    return clean == clean[::-1]</text>
        <text x="0" y="65" class="test-text">print(is_palindrome_advanced("A man, a plan, a canal: Panama"))</text>
      </g>
    </g>
  </g>
  
  <!-- Efficient Implementation -->
  <g id="efficient">
    <rect x="50" y="360" width="700" height="140" rx="8" class="efficient-box"/>
    <text x="70" y="385" class="emoji">⚡</text>
    <text x="100" y="385" class="method-title" fill="#059669">効率的な回文判定（大きな文字列用）</text>
    
    <g transform="translate(70, 405)">
      <rect x="0" y="0" width="660" height="80\" class="code-block"/>
      <g transform="translate(15, 15)">
        <text x="0" y="0" class="code-text">def is_palindrome_efficient(s):</text>
        <text x="0" y="15" class="code-text">    left, right = 0, len(s) - 1</text>
        <text x="0" y="30" class="code-text">    while left &lt; right:</text>
        <text x="0" y="45" class="code-text">        if s[left] != s[right]:</text>
        <text x="0" y="60" class="code-text">            return False</text>
        
        <g transform="translate(400, 0)">
          <rect x="0" y="0" width="220\" height="80\" fill="#E0F2FE\" stroke="#059669\" stroke-width="1"/>
          <text x="10" y="15" class="result-text">効率化のポイント</text>
          <text x="10" y="30" class="explanation-text">• メモリ使用量が少ない</text>
          <text x="10" y="45" class="explanation-text">• 途中で判定終了可能</text>
          <text x="10" y="60" class="explanation-text">• 大きな文字列に適している</text>
        </g>
      </g>
    </g>
  </g>
  
  <!-- Test Results -->
  <g id="test-results">
    <rect x="50" y="520" width="700" height="150" rx="8" fill="#F3F4F6" stroke="#9CA3AF" stroke-width="1"/>
    <text x="70" y="545" class="emoji">🧪</text>
    <text x="100" y="545" class="section-title">テスト結果の比較</text>
    
    <!-- Test cases -->
    <g transform="translate(80, 565)">
      <!-- Headers -->
      <rect x="0" y="0" width="150" height="30" fill="#E5E7EB" stroke="#9CA3AF" stroke-width="1"/>
      <text x="75" y="20" text-anchor="middle" class="method-title">テスト文字列</text>
      
      <rect x="150" y="0" width="130" height="30" fill="#E5E7EB" stroke="#9CA3AF" stroke-width="1"/>
      <text x="215" y="20" text-anchor="middle" class="method-title">基本判定</text>
      
      <rect x="280" y="0" width="130" height="30" fill="#E5E7EB" stroke="#9CA3AF" stroke-width="1"/>
      <text x="345" y="20" text-anchor="middle" class="method-title">大小文字無視</text>
      
      <rect x="410" y="0" width="130" height="30" fill="#E5E7EB" stroke="#9CA3AF" stroke-width="1"/>
      <text x="475" y="20" text-anchor="middle" class="method-title">記号無視</text>
      
      <rect x="540" y="0" width="130" height="30" fill="#E5E7EB" stroke="#9CA3AF" stroke-width="1"/>
      <text x="605" y="20" text-anchor="middle" class="method-title">効率的判定</text>
      
      <!-- Row 1: racecar -->
      <rect x="0" y="30" width="150" height="25" class="test-block"/>
      <text x="75" y="45" text-anchor="middle" class="test-text">"racecar"</text>
      
      <rect x="150" y="30" width="130" height="25" class="result-block"/>
      <text x="215" y="45" text-anchor="middle" class="result-text">True</text>
      
      <rect x="280" y="30" width="130" height="25" class="result-block"/>
      <text x="345" y="45" text-anchor="middle" class="result-text">True</text>
      
      <rect x="410" y="30" width="130" height="25" class="result-block"/>
      <text x="475" y="45" text-anchor="middle" class="result-text">True</text>
      
      <rect x="540" y="30" width="130" height="25" class="result-block"/>
      <text x="605" y="45" text-anchor="middle" class="result-text">True</text>
      
      <!-- Row 2: Racecar -->
      <rect x="0" y="55" width="150" height="25" class="test-block"/>
      <text x="75" y="70" text-anchor="middle" class="test-text">"Racecar"</text>
      
      <rect x="150" y="55" width="130" height="25" fill="#FEE2E2" stroke="#EF4444" stroke-width="1"/>
      <text x="215" y="70" text-anchor="middle" class="test-text">False</text>
      
      <rect x="280" y="55" width="130" height="25" class="result-block"/>
      <text x="345" y="70" text-anchor="middle" class="result-text">True</text>
      
      <rect x="410" y="55" width="130" height="25" class="result-block"/>
      <text x="475" y="70" text-anchor="middle" class="result-text">True</text>
      
      <rect x="540" y="55" width="130" height="25" fill="#FEE2E2" stroke="#EF4444" stroke-width="1"/>
      <text x="605" y="70" text-anchor="middle" class="test-text">False</text>
      
      <!-- Row 3: A man, a plan... -->
      <rect x="0" y="80" width="150" height="25" class="test-block"/>
      <text x="75" y="95" text-anchor="middle" class="test-text">"A man, a plan..."</text>
      
      <rect x="150" y="80" width="130" height="25" fill="#FEE2E2" stroke="#EF4444" stroke-width="1"/>
      <text x="215" y="95" text-anchor="middle" class="test-text">False</text>
      
      <rect x="280" y="80" width="130" height="25" fill="#FEE2E2" stroke="#EF4444" stroke-width="1"/>
      <text x="345" y="95" text-anchor="middle" class="test-text">False</text>
      
      <rect x="410" y="80" width="130" height="25" class="result-block"/>
      <text x="475" y="95" text-anchor="middle" class="result-text">True</text>
      
      <rect x="540" y="80" width="130" height="25" fill="#FEE2E2" stroke="#EF4444" stroke-width="1"/>
      <text x="605" y="95" text-anchor="middle" class="test-text">False</text>
    </g>
  </g>
  
</svg>