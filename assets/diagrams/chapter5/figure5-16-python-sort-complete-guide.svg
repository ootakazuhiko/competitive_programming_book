<svg viewBox="0 0 800 750" xmlns="http://www.w3.org/2000/svg">
  <title>図5-16：Pythonでのソート完全ガイド</title>
  <desc>Pythonのソート機能の様々な使い方と競技プログラミングでの活用法を包括的に説明する図</desc>
  
  <defs>
    <style>
      .title { font: 600 16px Inter, sans-serif; fill: #1F2937; }
      .section-title { font: 600 14px Inter, sans-serif; fill: #374151; }
      .method-title { font: 600 12px Inter, sans-serif; }
      .code-text { font: 500 11px 'Monaco', monospace; fill: #4B5563; }
      .comment-text { font: 400 10px Inter, sans-serif; fill: #6B7280; }
      .output-text { font: 500 10px 'Monaco', monospace; fill: #059669; }
      .emoji { font: 400 16px Inter, sans-serif; }
      
      .basic-section { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 2; }
      .reverse-section { fill: #DBEAFE; stroke: #3B82F6; stroke-width: 2; }
      .custom-section { fill: #D1FAE5; stroke: #10B981; stroke-width: 2; }
      .comparison-section { fill: #F3E8FF; stroke: #8B5CF6; stroke-width: 2; }
      .code-box { fill: #F8FAFC; stroke: #CBD5E0; stroke-width: 1; }
      .output-box { fill: #ECFDF5; stroke: #22C55E; stroke-width: 1; }
      .warning-box { fill: #FEF2F2; stroke: #EF4444; stroke-width: 1; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="750" fill="#FFFFFF"/>
  
  <!-- Title -->
  <text x="400" y="32" text-anchor="middle" class="title">図5-16：Pythonでのソート完全ガイド</text>
  
  <!-- Basic Sort -->
  <g id="basic-sort">
    <rect x="50" y="60" width="350" height="160" rx="12" class="basic-section"/>
    <text x="70" y="85" class="emoji">📊</text>
    <text x="100" y="85" class="method-title" fill="#D97706">基本的なソート</text>
    
    <g transform="translate(70, 100)">
      <rect x="0" y="0" width="310" height="105" class="code-box"/>
      <text x="10" y="15" class="comment-text"># リストの要素を昇順にソート</text>
      <text x="10" y="30" class="code-text">numbers = [3, 1, 4, 1, 5, 9, 2, 6]</text>
      <text x="10" y="45" class="code-text">numbers.sort()</text>
      <text x="150" y="45" class="comment-text"># 元のリストを変更</text>
      <text x="10" y="60" class="code-text">print(numbers)</text>
      <text x="10" y="75" class="output-text"># [1, 1, 2, 3, 4, 5, 6, 9]</text>
      
      <text x="10" y="95" class="comment-text">✅ 元のリストが変更される（破壊的操作）</text>
    </g>
  </g>
  
  <!-- Sorted Function -->
  <g id="sorted-function">
    <rect x="420" y="60" width="330" height="160" rx="12" class="basic-section"/>
    <text x="440" y="85" class="emoji">🔄</text>
    <text x="470" y="85" class="method-title" fill="#D97706">sorted()関数</text>
    
    <g transform="translate(440, 100)">
      <rect x="0" y="0" width="290" height="105" class="code-box"/>
      <text x="10" y="15" class="comment-text"># 新しいソート済みリストを作成</text>
      <text x="10" y="30" class="code-text">numbers = [3, 1, 4, 1, 5, 9, 2, 6]</text>
      <text x="10" y="45" class="code-text">sorted_nums = sorted(numbers)</text>
      <text x="10" y="60" class="code-text">print(sorted_nums)</text>
      <text x="10" y="75" class="output-text"># [1, 1, 2, 3, 4, 5, 6, 9]</text>
      
      <text x="10" y="95" class="comment-text">✅ 元のリストは変更されない（非破壊的）</text>
    </g>
  </g>
  
  <!-- Reverse Sort -->
  <g id="reverse-sort">
    <rect x="50" y="240" width="350" height="140" rx="12" class="reverse-section"/>
    <text x="70" y="265" class="emoji">🔃</text>
    <text x="100" y="265" class="method-title" fill="#1E40AF">逆順ソート</text>
    
    <g transform="translate(70, 280)">
      <rect x="0" y="0" width="310" height="85" class="code-box"/>
      <text x="10" y="15" class="code-text">numbers = [3, 1, 4, 1, 5, 9, 2, 6]</text>
      <text x="10" y="30" class="code-text">numbers.sort(reverse=True)</text>
      <text x="200" y="30" class="comment-text"># 降順</text>
      <text x="10" y="45" class="code-text">print(numbers)</text>
      <text x="10" y="60" class="output-text"># [9, 6, 5, 4, 3, 2, 1, 1]</text>
      
      <text x="10" y="80" class="comment-text">💡 reverse=True で降順ソートが可能</text>
    </g>
  </g>
  
  <!-- Method Comparison -->
  <g id="method-comparison">
    <rect x="420" y="240" width="330" height="140" rx="12" class="comparison-section"/>
    <text x="440" y="265" class="emoji">⚖️</text>
    <text x="470" y="265" class="method-title" fill="#7C3AED">sort() vs sorted() 比較</text>
    
    <g transform="translate(440, 280)">
      <rect x="0" y="0" width="290" height="85" rx="8" fill="#F9FAFB" stroke="#D1D5DB" stroke-width="1"/>
      <text x="10" y="20" style="font: 600 11px Inter, sans-serif; fill: #374151;">sort():</text>
      <text x="60" y="20" class="comment-text">元リスト変更、高速、返り値なし</text>
      
      <text x="10" y="40" style="font: 600 11px Inter, sans-serif; fill: #374151;">sorted():</text>
      <text x="70" y="40" class="comment-text">新リスト作成、安全、返り値あり</text>
      
      <text x="10" y="60" style="font: 600 11px Inter, sans-serif; fill: #059669;">競プロでの使い分け:</text>
      <text x="10" y="75" class="comment-text">元データ保持不要 → sort() / 保持必要 → sorted()</text>
    </g>
  </g>
  
  <!-- Custom Sort -->
  <g id="custom-sort">
    <rect x="50" y="400" width="700" height="180" rx="12" class="custom-section"/>
    <text x="70" y="425" class="emoji">🎯</text>
    <text x="100" y="425" class="method-title" fill="#047857">カスタムソート（key関数の活用）</text>
    
    <!-- String length sort -->
    <g transform="translate(70, 440)">
      <text x="0" y="15" style="font: 600 12px Inter, sans-serif; fill: #059669;">1️⃣ 文字列を長さでソート</text>
      <rect x="0" y="20" width="300" height="50" class="code-box"/>
      <text x="10" y="35" class="code-text">words = ["apple", "cat", "banana", "dog"]</text>
      <text x="10" y="50" class="code-text">words.sort(key=len)</text>
      <text x="10" y="65" class="output-text"># ['cat', 'dog', 'apple', 'banana']</text>
    </g>
    
    <!-- Absolute value sort -->
    <g transform="translate(390, 440)">
      <text x="0" y="15" style="font: 600 12px Inter, sans-serif; fill: #059669;">2️⃣ 絶対値でソート</text>
      <rect x="0" y="20" width="280" height="50" class="code-box"/>
      <text x="10" y="35" class="code-text">numbers = [-3, 1, -4, 2, 5]</text>
      <text x="10" y="50" class="code-text">numbers.sort(key=abs)</text>
      <text x="10" y="65" class="output-text"># [1, 2, -3, -4, 5]</text>
    </g>
    
    <!-- Complex sort -->
    <g transform="translate(70, 520)">
      <text x="0" y="15" style="font: 600 12px Inter, sans-serif; fill: #059669;">3️⃣ 複合条件でソート（点数降順、同点なら名前昇順）</text>
      <rect x="0" y="20" width="600" height="65" class="code-box"/>
      <text x="10" y="35" class="code-text">students = [("Alice", 85), ("Bob", 90), ("Charlie", 85)]</text>
      <text x="10" y="50" class="code-text">students.sort(key=lambda x: (-x[1], x[0]))</text>
      <text x="350" y="50" class="comment-text"># 負符号で降順</text>
      <text x="10" y="65" class="output-text"># [('Bob', 90), ('Alice', 85), ('Charlie', 85)]</text>
    </g>
  </g>
  
  <!-- Competitive Programming Tips -->
  <g id="competitive-tips">
    <rect x="50" y="600" width="700" height="120" rx="12" fill="#F0F9FF" stroke="#0EA5E9" stroke-width="2"/>
    <text x="70" y="625" class="emoji">🏆</text>
    <text x="100" y="625" style="font: 600 14px Inter, sans-serif; fill: #0284C7;">競技プログラミングでのソート活用法</text>
    
    <g transform="translate(70, 640)">
      <g transform="translate(0, 10)">
        <circle cx="8" cy="8" r="4" fill="#0EA5E9"/>
        <text x="20" y="12" class="comment-text" fill="#0369A1">
          <tspan style="font: 600 11px Inter, sans-serif;">配列操作問題</tspan>：中央値、最頻値、k番目の要素などを効率的に求める
        </text>
      </g>
      
      <g transform="translate(0, 30)">
        <circle cx="8" cy="8" r="4" fill="#0EA5E9"/>
        <text x="20" y="12" class="comment-text" fill="#0369A1">
          <tspan style="font: 600 11px Inter, sans-serif;">貪欲法</tspan>：最適解を求めるため、条件に応じて昇順・降順ソートを活用
        </text>
      </g>
      
      <g transform="translate(0, 50)">
        <circle cx="8" cy="8" r="4" fill="#0EA5E9"/>
        <text x="20" y="12" class="comment-text" fill="#0369A1">
          <tspan style="font: 600 11px Inter, sans-serif;">二分探索</tspan>：ソート済み配列での高速検索（bisectモジュールと組み合わせ）
        </text>
      </g>
      
      <g transform="translate(400, 10)">
        <rect x="0" y="0" width="280" height="60" rx="8" class="warning-box"/>
        <text x="140" y="20" text-anchor="middle" style="font: 600 12px Inter, sans-serif; fill: #DC2626;">
          ⚡ 計算量の注意
        </text>
        <text x="140" y="35" text-anchor="middle" class="comment-text" fill="#991B1B">
          Pythonのソート：O(n log n)
        </text>
        <text x="140" y="50" text-anchor="middle" class="comment-text" fill="#991B1B">
          N≤10⁶程度まで実用的
        </text>
      </g>
    </g>
  </g>
  
</svg>