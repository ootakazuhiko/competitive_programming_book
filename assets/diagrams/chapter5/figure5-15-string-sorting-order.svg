<svg viewBox="0 0 800 650" xmlns="http://www.w3.org/2000/svg">
  <title>図5-15：文字列のソートと順序</title>
  <desc>基本的な文字列ソート、長さソート、複合条件ソート、文字列の大小比較の理解と数値文字列の比較注意点を示す図</desc>
  
  <defs>
    <style>
      .title { font: 600 16px Inter, sans-serif; fill: #1F2937; }
      .section-title { font: 600 14px Inter, sans-serif; fill: #374151; }
      .method-title { font: 600 13px Inter, sans-serif; }
      .code-text { font: 500 11px 'Courier New', monospace; fill: #1F2937; }
      .comment-text { font: 400 10px 'Courier New', monospace; fill: #16A34A; }
      .result-text { font: 500 10px 'Courier New', monospace; fill: #DC2626; }
      .comparison-text { font: 600 11px Inter, sans-serif; fill: #7C3AED; }
      .warning-text { font: 600 11px Inter, sans-serif; fill: #DC2626; }
      .explanation-text { font: 400 10px Inter, sans-serif; fill: #6B7280; }
      .emoji { font: 400 16px Inter, sans-serif; }
      
      .basic-box { fill: #DBEAFE; stroke: #3B82F6; stroke-width: 2; }
      .length-box { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 2; }
      .comparison-box { fill: #F3E8FF; stroke: #7C3AED; stroke-width: 2; }
      .warning-box { fill: #FEE2E2; stroke: #EF4444; stroke-width: 2; }
      .code-block { fill: #F8FAFC; stroke: #CBD5E0; stroke-width: 1; }
      .result-block { fill: #ECFDF5; stroke: #22C55E; stroke-width: 1; }
      .example-cell { fill: #F8FAFC; stroke: #CBD5E0; stroke-width: 1; }
      .highlight-cell { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 2; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="650" fill="#FFFFFF"/>
  
  <!-- Title -->
  <text x="400" y="32" text-anchor="middle" class="title">図5-15：文字列のソートと順序</text>
  
  <!-- Basic String Sort -->
  <g id="basic-sort">
    <rect x="50" y="60" width="700" height="130" rx="8" class="basic-box"/>
    <text x="70" y="85" class="emoji">🔤</text>
    <text x="100" y="85" class="method-title" fill="#1E40AF">基本的な文字列ソート</text>
    
    <g transform="translate(70, 105)">
      <rect x="0" y="0" width="660" height="70" class="code-block"/>
      <g transform="translate(15, 15)">
        <text x="0" y="0" class="code-text">words = ["banana", "apple", "cherry", "date"]</text>
        <text x="0" y="15" class="code-text">words.sort()</text>
        <text x="0" y="30" class="result-text">print(words)  # ['apple', 'banana', 'cherry', 'date']</text>
        
        <text x="0" y="50" class="comment-text"># 文字列の長さでソート</text>
        <text x="200" y="50" class="code-text">words.sort(key=len)</text>
        
        <g transform="translate(400, 0)">
          <rect x="0" y="0" width="220" height="55" fill="#E0F2FE" stroke="#0369A1" stroke-width="1"/>
          <text x="10" y="15" class="method-title">ソート結果</text>
          <text x="10" y="30" class="explanation-text">辞書順: アルファベット順</text>
          <text x="10" y="45" class="explanation-text">長さ順: 短い文字列から</text>
        </g>
      </g>
    </g>
  </g>
  
  <!-- Length and Composite Sort -->
  <g id="length-sort">
    <rect x="50" y="210" width="700" height="110" rx="8" class="length-box"/>
    <text x="70" y="235" class="emoji">📏</text>
    <text x="100" y="235" class="method-title" fill="#D97706">複合条件でソート（長さ→辞書順）</text>
    
    <g transform="translate(70, 255)">
      <rect x="0" y="0" width="660" height="50" class="code-block"/>
      <g transform="translate(15, 15)">
        <text x="0" y="0" class="code-text">words.sort(key=lambda x: (len(x), x))</text>
        <text x="0" y="15" class="result-text">print(words)  # ['date', 'apple', 'banana', 'cherry']</text>
        
        <g transform="translate(350, -5)">
          <rect x="0" y="0" width="280" height="40" fill="#FDF6E3" stroke="#D97706" stroke-width="1"/>
          <text x="10" y="15" class="explanation-text">1. まず長さでソート</text>
          <text x="10" y="30" class="explanation-text">2. 同じ長さなら辞書順でソート</text>
        </g>
      </g>
    </g>
  </g>
  
  <!-- String Comparison -->
  <g id="comparison">
    <rect x="50" y="340" width="700" height="140" rx="8" class="comparison-box"/>
    <text x="70" y="365" class="emoji">⚖️</text>
    <text x="100" y="365" class="method-title" fill="#7C3AED">文字列の大小比較の理解</text>
    
    <g transform="translate(70, 385)">
      <rect x="0" y="0" width="660" height="80" class="code-block"/>
      <g transform="translate(15, 15)">
        <text x="0" y="0" class="comment-text"># 辞書順の比較</text>
        <text x="0" y="15" class="code-text">print("apple" &lt; "banana")</text>
        <text x="200" y="15" class="result-text"># True</text>
        <text x="0" y="30" class="code-text">print("Apple" &lt; "apple")</text>
        <text x="200" y="30" class="result-text"># True（大文字が先）</text>
        <text x="0" y="45" class="code-text">print("a" &lt; "aa")</text>
        <text x="200" y="45" class="result-text"># True</text>
        
        <g transform="translate(350, 0)">
          <rect x="0" y="0" width="280" height="80" fill="#FAF5FF" stroke="#7C3AED" stroke-width="1"/>
          <text x="10" y="15" class="comparison-text">比較の原則</text>
          <text x="10" y="30" class="explanation-text">• ASCII値で比較</text>
          <text x="10" y="45" class="explanation-text">• 大文字 < 小文字</text>
          <text x="10" y="60" class="explanation-text">• 短い文字列 < 長い文字列</text>
          <text x="10" y="75" class="explanation-text">• 左から1文字ずつ比較</text>
        </g>
      </g>
    </g>
  </g>
  
  <!-- Numeric String Warning -->
  <g id="numeric-warning">
    <rect x="50" y="500" width="700" height="120" rx="8" class="warning-box"/>
    <text x="70" y="525" class="emoji">⚠️</text>
    <text x="100" y="525" class="method-title" fill="#DC2626">数値文字列の比較（注意が必要）</text>
    
    <g transform="translate(70, 545)">
      <rect x="0" y="0" width="330" height="60" class="code-block"/>
      <g transform="translate(15, 15)">
        <text x="0" y="0" class="comment-text"># 数値文字列の比較（注意！）</text>
        <text x="0" y="15" class="code-text">print("10" &lt; "2")</text>
        <text x="120" y="15" class="result-text"># True（文字列として）</text>
        <text x="0" y="30" class="code-text">print("10" &lt; "02")</text>
        <text x="120" y="30" class="result-text"># False</text>
      </g>
      
      <!-- Solution -->
      <g transform="translate(350, 0)">
        <rect x="0" y="0" width="320" height="60" class="result-block"/>
        <g transform="translate(15, 15)">
          <text x="0" y="0" class="comment-text"># 数値として比較したい場合</text>
          <text x="0" y="15" class="code-text">numbers = ["10", "2", "1", "20"]</text>
          <text x="0" y="30" class="code-text">numbers.sort(key=int)</text>
          <text x="0" y="45" class="result-text">print(numbers)  # ['1', '2', '10', '20']</text>
        </g>
      </g>
    </g>
  </g>
  
</svg>