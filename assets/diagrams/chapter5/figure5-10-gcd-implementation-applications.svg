<svg viewBox="0 0 800 750" xmlns="http://www.w3.org/2000/svg">
  <title>図5-10：GCDの実装と応用</title>
  <desc>最大公約数（GCD）の基本実装、Python標準ライブラリの活用、最小公倍数（LCM）計算、実際の問題での応用例を示す図</desc>
  
  <defs>
    <style>
      .title { font: 600 16px Inter, sans-serif; fill: #1F2937; }
      .section-title { font: 600 14px Inter, sans-serif; fill: #374151; }
      .method-title { font: 600 13px Inter, sans-serif; }
      .code-text { font: 500 11px 'Courier New', monospace; fill: #1F2937; }
      .comment-text { font: 400 10px 'Courier New', monospace; fill: #16A34A; }
      .formula-text { font: 600 12px 'Courier New', monospace; fill: #7C3AED; }
      .example-text { font: 500 11px Inter, sans-serif; fill: #DC2626; }
      .explanation-text { font: 400 10px Inter, sans-serif; fill: #6B7280; }
      .emoji { font: 400 16px Inter, sans-serif; }
      
      .basic-box { fill: #DBEAFE; stroke: #3B82F6; stroke-width: 2; }
      .library-box { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 2; }
      .lcm-box { fill: #F3E8FF; stroke: #7C3AED; stroke-width: 2; }
      .application-box { fill: #DCFCE7; stroke: #22C55E; stroke-width: 2; }
      .code-block { fill: #F8FAFC; stroke: #CBD5E0; stroke-width: 1; }
      .highlight-line { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 1; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="750" fill="#FFFFFF"/>
  
  <!-- Title -->
  <text x="400" y="32" text-anchor="middle" class="title">図5-10：GCDの実装と応用</text>
  
  <!-- Basic Implementation -->
  <g id="basic-impl">
    <rect x="50" y="60" width="350" height="160" rx="8" class="basic-box"/>
    <text x="70" y="85" class="emoji">🔧</text>
    <text x="100" y="85" class="method-title" fill="#1E40AF">基本実装</text>
    
    <g transform="translate(70, 100)">
      <rect x="0" y="0" width="310" height="105" class="code-block"/>
      <g transform="translate(10, 15)">
        <text x="0" y="0" class="code-text">def gcd(a, b):</text>
        <text x="0" y="15" class="code-text">    while b:</text>
        <text x="0" y="30" class="code-text">        a, b = b, a % b</text>
        <text x="0" y="45" class="code-text">    return a</text>
        <text x="0" y="65" class="comment-text"># 使用例</text>
        <text x="0" y="80" class="code-text">print(gcd(48, 18))</text>
        <text x="175" y="80" class="comment-text"># 6</text>
        <text x="0" y="95" class="code-text">print(gcd(17, 13))</text>
        <text x="175" y="95" class="comment-text"># 1（互いに素）</text>
      </g>
    </g>
  </g>
  
  <!-- Python Standard Library -->
  <g id="library-impl">
    <rect x="420" y="60" width="330" height="160" rx="8" class="library-box"/>
    <text x="440" y="85" class="emoji">📚</text>
    <text x="470" y="85" class="method-title" fill="#D97706">Python標準ライブラリの利用</text>
    
    <g transform="translate(440, 100)">
      <rect x="0" y="0" width="290" height="105" class="code-block"/>
      <g transform="translate(10, 15)">
        <text x="0" y="0" class="code-text">import math</text>
        <text x="0" y="15" class="code-text">print(math.gcd(48, 18))</text>
        <text x="190" y="15" class="comment-text"># 6</text>
        <text x="0" y="35" class="comment-text"># 複数の数のGCD</text>
        <text x="0" y="50" class="code-text">from functools import reduce</text>
        <text x="0" y="65" class="code-text">numbers = [48, 18, 24]</text>
        <text x="0" y="80" class="code-text">result = reduce(math.gcd, numbers)</text>
        <text x="0" y="95" class="code-text">print(result)</text>
        <text x="120" y="95" class="comment-text"># 6</text>
      </g>
    </g>
  </g>
  
  <!-- LCM Calculation -->
  <g id="lcm-calc">
    <rect x="50" y="240" width="700" height="140" rx="8" class="lcm-box"/>
    <text x="70" y="265" class="emoji">🔢</text>
    <text x="100" y="265" class="method-title" fill="#7C3AED">LCM（最小公倍数）の計算</text>
    
    <g transform="translate(70, 280)">
      <rect x="0" y="0" width="660" height="85" class="code-block"/>
      <g transform="translate(10, 15)">
        <text x="0" y="0" class="code-text">def lcm(a, b):</text>
        <text x="0" y="15" class="code-text">    return (a * b) // gcd(a, b)</text>
        <text x="0" y="35" class="comment-text"># 公式：lcm(a, b) × gcd(a, b) = a × b</text>
        <text x="0" y="50" class="code-text">print(lcm(48, 18))</text>
        <text x="160" y="50" class="comment-text"># 144</text>
        
        <!-- Formula visualization -->
        <g transform="translate(350, 0)">
          <rect x="0" y="0" width="280" height="70" fill="#F3E8FF" stroke="#7C3AED" stroke-width="1"/>
          <text x="140" y="20" text-anchor="middle" class="formula-text">公式の確認</text>
          <text x="140" y="35" text-anchor="middle" class="code-text">lcm(48,18) × gcd(48,18)</text>
          <text x="140" y="50" text-anchor="middle" class="code-text">= 144 × 6 = 864</text>
          <text x="140" y="65" text-anchor="middle" class="code-text">48 × 18 = 864 ✓</text>
        </g>
      </g>
    </g>
  </g>
  
  <!-- Applications -->
  <g id="applications">
    <rect x="50" y="400" width="700" height="320" rx="8" class="application-box"/>
    <text x="70" y="425" class="emoji">🎯</text>
    <text x="100" y="425" class="method-title" fill="#059669">実際の問題での活用例</text>
    
    <!-- Application 1: Fraction reduction -->
    <g transform="translate(70, 445)">
      <rect x="0" y="0" width="660" height="80" class="code-block"/>
      <text x="10" y="15" class="comment-text"># 「分数 a/b を約分せよ」</text>
      <g transform="translate(10, 25)">
        <text x="0" y="15" class="code-text">a, b = map(int, input().split())</text>
        <text x="0" y="30" class="code-text">g = math.gcd(a, b)</text>
        <text x="0" y="45" class="code-text">print(a // g, b // g)</text>
        
        <g transform="translate(350, 0)">
          <rect x="0" y="0" width="280" height="55" fill="#E0F2FE" stroke="#0369A1" stroke-width="1"/>
          <text x="10" y="15" class="explanation-text">例: 48/18 を約分</text>
          <text x="10" y="30" class="explanation-text">gcd(48,18) = 6</text>
          <text x="10" y="45" class="explanation-text">結果: 48÷6 / 18÷6 = 8/3</text>
        </g>
      </g>
    </g>
    
    <!-- Application 2: Period synchronization -->
    <g transform="translate(70, 540)">
      <rect x="0" y="0" width="660" height="80" class="code-block"/>
      <text x="10" y="15" class="comment-text"># 「2つの周期がa, bの現象が同時に起こるのは？」</text>
      <g transform="translate(10, 25)">
        <text x="0" y="15" class="code-text">a, b = map(int, input().split())</text>
        <text x="0" y="30" class="code-text">print(lcm(a, b))</text>
        
        <g transform="translate(350, 0)">
          <rect x="0" y="0" width="280" height="55" fill="#E0F2FE" stroke="#0369A1" stroke-width="1"/>
          <text x="10" y="15" class="explanation-text">例: 周期6と周期4の現象</text>
          <text x="10" y="30" class="explanation-text">lcm(6,4) = 12</text>
          <text x="10" y="45" class="explanation-text">12単位時間後に同時発生</text>
        </g>
      </g>
    </g>
    
    <!-- Application 3: Grid problems -->
    <g transform="translate(70, 635)">
      <rect x="0" y="0" width="660" height="65" class="code-block"/>
      <text x="10" y="15" class="comment-text"># 「M×Nのグリッドで対角線が通る格子点の数」</text>
      <g transform="translate(10, 25)">
        <text x="0" y="15" class="code-text">m, n = map(int, input().split())</text>
        <text x="0" y="30" class="code-text">print(math.gcd(m, n) - 1)</text>
        
        <g transform="translate(350, 0)">
          <rect x="0" y="0" width="280" height="40" fill="#E0F2FE" stroke="#0369A1" stroke-width="1"/>
          <text x="10" y="15" class="explanation-text">例: 6×4のグリッド</text>
          <text x="10" y="30" class="explanation-text">gcd(6,4)-1 = 2-1 = 1点</text>
        </g>
      </g>
    </g>
  </g>
  
</svg>