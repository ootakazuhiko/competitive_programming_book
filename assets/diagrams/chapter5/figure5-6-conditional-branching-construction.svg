<svg viewBox="0 0 800 750" xmlns="http://www.w3.org/2000/svg">
  <title>図5-6：条件分岐の段階的構築</title>
  <desc>点数に応じた成績判定の条件分岐を段階的に構築する方法を示す図</desc>
  
  <defs>
    <style>
      .title { font: 600 16px Inter, sans-serif; fill: #1F2937; }
      .section-title { font: 600 14px Inter, sans-serif; fill: #374151; }
      .code-text { font: 500 12px 'Courier New', monospace; fill: #1F2937; }
      .condition-text { font: 600 12px 'Courier New', monospace; fill: #7C3AED; }
      .grade-text { font: 700 14px Inter, sans-serif; }
      .explanation-text { font: 400 11px Inter, sans-serif; fill: #6B7280; }
      .warning-text { font: 600 11px Inter, sans-serif; fill: #DC2626; }
      .success-text { font: 600 11px Inter, sans-serif; fill: #059669; }
      .emoji { font: 400 16px Inter, sans-serif; }
      
      .problem-box { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 2; }
      .bad-box { fill: #FEE2E2; stroke: #EF4444; stroke-width: 2; }
      .good-box { fill: #DCFCE7; stroke: #22C55E; stroke-width: 2; }
      .code-box { fill: #F8FAFC; stroke: #CBD5E0; stroke-width: 1; }
      .highlight-box { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 1; }
      .arrow { stroke: #059669; stroke-width: 2; fill: none; }
    </style>
    
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
      <path d="M0,0 L0,6 L12,3 z" fill="#059669"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="750" fill="#FFFFFF"/>
  
  <!-- Title -->
  <text x="400" y="32" text-anchor="middle" class="title">図5-6：条件分岐の段階的構築</text>
  
  <!-- Problem Description -->
  <g id="problem">
    <rect x="50" y="60" width="700" height="60" rx="8" class="problem-box"/>
    <text x="70" y="85" class="emoji">📝</text>
    <text x="100" y="85" class="section-title" fill="#D97706">問題例：「点数に応じて成績を判定」</text>
    <text x="70" y="105" class="explanation-text">90点以上：A, 80点以上：B, 70点以上：C, 60点以上：D, 未満：F</text>
  </g>
  
  <!-- Bad Example -->
  <g id="bad-example">
    <rect x="50" y="140" width="700" height="200" rx="8" class="bad-box"/>
    <text x="70" y="165" class="emoji">❌</text>
    <text x="100" y="165" class="section-title" fill="#DC2626">複雑すぎる条件（非推奨）</text>
    
    <g transform="translate(70, 180)">
      <rect x="0" y="0" width="650" height="145" class="code-box"/>
      <g transform="translate(15, 15)">
        <text x="0" y="15" class="code-text">if score >= 90:</text>
        <text x="0" y="30" class="code-text">    grade = "A"</text>
        
        <text x="0" y="50" class="code-text">elif score >= 80 </text>
        <text x="140" y="50" class="condition-text">and score &lt; 90:</text>
        <rect x="245" y="40" width="150" height="20" class="highlight-box"/>
        <text x="320" y="53" text-anchor="middle" class="warning-text">不要な条件</text>
        <text x="0" y="65" class="code-text">    grade = "B"</text>
        
        <text x="0" y="85" class="code-text">elif score >= 70 </text>
        <text x="140" y="85" class="condition-text">and score &lt; 80:</text>
        <rect x="245" y="75" width="150" height="20" class="highlight-box"/>
        <text x="320" y="88" text-anchor="middle" class="warning-text">不要な条件</text>
        <text x="0" y="100" class="code-text">    grade = "C"</text>
        
        <text x="0" y="120" class="code-text">elif score >= 60 </text>
        <text x="140" y="120" class="condition-text">and score &lt; 70:</text>
        <rect x="245" y="110" width="150" height="20" class="highlight-box"/>
        <text x="320" y="123" text-anchor="middle" class="warning-text">不要な条件</text>
        <text x="0" y="135" class="code-text">    grade = "D"</text>
      </g>
    </g>
  </g>
  
  <!-- Arrow -->
  <path d="M400 350 L400 370" class="arrow" marker-end="url(#arrow)"/>
  <text x="420" y="365" class="success-text">改善</text>
  
  <!-- Good Example -->
  <g id="good-example">
    <rect x="50" y="380" width="700" height="200" rx="8" class="good-box"/>
    <text x="70" y="405" class="emoji">✅</text>
    <text x="100" y="405" class="section-title" fill="#059669">段階的な条件分岐（推奨）</text>
    
    <g transform="translate(70, 420)">
      <rect x="0" y="0" width="650" height="145" class="code-box"/>
      <g transform="translate(15, 15)">
        <text x="0" y="15" class="code-text">if score >= 90:</text>
        <text x="0" y="30" class="code-text">    grade = "A"</text>
        
        <text x="0" y="50" class="code-text">elif score >= 80:</text>
        <rect x="170" y="40" width="150" height="20" fill="#DCFCE7" stroke="#22C55E" stroke-width="1"/>
        <text x="245" y="53" text-anchor="middle" class="success-text">既に90未満が確定</text>
        <text x="0" y="65" class="code-text">    grade = "B"</text>
        
        <text x="0" y="85" class="code-text">elif score >= 70:</text>
        <rect x="170" y="75" width="150" height="20" fill="#DCFCE7" stroke="#22C55E" stroke-width="1"/>
        <text x="245" y="88" text-anchor="middle" class="success-text">既に80未満が確定</text>
        <text x="0" y="100" class="code-text">    grade = "C"</text>
        
        <text x="0" y="120" class="code-text">elif score >= 60:</text>
        <rect x="170" y="110" width="150" height="20" fill="#DCFCE7" stroke="#22C55E" stroke-width="1"/>
        <text x="245" y="123" text-anchor="middle" class="success-text">既に70未満が確定</text>
        <text x="0" y="135" class="code-text">    grade = "D"</text>
      </g>
    </g>
  </g>
  
  <!-- Flow Visualization -->
  <g id="flow-viz">
    <rect x="50" y="600" width="700" height="120" rx="8" fill="#F3F4F6" stroke="#9CA3AF" stroke-width="1"/>
    <text x="70" y="625" class="emoji">🔍</text>
    <text x="100" y="625" class="section-title">判定フローの視覚化</text>
    
    <!-- Flow chart -->
    <g transform="translate(70, 645)">
      <!-- Score 95 example -->
      <rect x="0" y="0" width="80" height="30" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
      <text x="40" y="20" text-anchor="middle" class="code-text">score=95</text>
      
      <path d="M85 15 L105 15" class="arrow" marker-end="url(#arrow)"/>
      
      <rect x="110" y="0" width="100" height="30" fill="#DCFCE7" stroke="#22C55E" stroke-width="1"/>
      <text x="160" y="20" text-anchor="middle" class="condition-text">95 >= 90</text>
      
      <path d="M215 15 L235 15" class="arrow" marker-end="url(#arrow)"/>
      
      <rect x="240" y="0" width="60" height="30" fill="#DBEAFE" stroke="#3B82F6" stroke-width="1"/>
      <text x="270" y="20" text-anchor="middle" class="grade-text" fill="#1E40AF">A</text>
      
      <!-- Score 75 example -->
      <rect x="350" y="0" width="80" height="30" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
      <text x="390" y="20" text-anchor="middle" class="code-text">score=75</text>
      
      <path d="M435 15 L455 15" class="arrow" marker-end="url(#arrow)"/>
      
      <rect x="460" y="0" width="140" height="30" fill="#FEE2E2" stroke="#EF4444" stroke-width="1"/>
      <text x="530" y="15" text-anchor="middle" class="explanation-text">90? No → 80? No</text>
      <text x="530" y="25" text-anchor="middle" class="condition-text">75 >= 70</text>
      
      <path d="M605 15 L625 15" class="arrow" marker-end="url(#arrow)"/>
      
      <rect x="630" y="0" width="60" height="30" fill="#DBEAFE" stroke="#3B82F6" stroke-width="1"/>
      <text x="660" y="20" text-anchor="middle" class="grade-text" fill="#1E40AF">C</text>
    </g>
    
    <!-- Key insight -->
    <g transform="translate(70, 680)">
      <rect x="0" y="0" width="660" height="25" fill="#ECFDF5" stroke="#22C55E" stroke-width="1"/>
      <text x="330" y="17" text-anchor="middle" class="success-text">elif文では前の条件が偽であることが保証される → 冗長な条件は不要</text>
    </g>
  </g>
  
</svg>