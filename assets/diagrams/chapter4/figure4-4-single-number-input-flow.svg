<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <title>図4-4：単一数値入力の内部処理フロー</title>
  <desc>input()関数とint()関数を使った単一数値入力の内部処理の流れを段階的に示す図</desc>
  
  <defs>
    <style>
      .title { font: 600 16px Inter, sans-serif; fill: #1F2937; }
      .step-title { font: 600 14px Inter, sans-serif; fill: #374151; }
      .code-text { font: 500 13px 'Monaco', 'Menlo', monospace; fill: #4B5563; }
      .data-text { font: 600 14px 'Monaco', 'Menlo', monospace; }
      .explanation-text { font: 500 12px Inter, sans-serif; fill: #6B7280; }
      .type-text { font: 500 11px Inter, sans-serif; fill: #059669; }
      .note-text { font: 500 11px Inter, sans-serif; fill: #DC2626; }
      .emoji { font: 400 18px Inter, sans-serif; }
      
      .input-stage { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 2; }
      .process-stage { fill: #DBEAFE; stroke: #3B82F6; stroke-width: 2; }
      .store-stage { fill: #ECFDF5; stroke: #22C55E; stroke-width: 2; }
      .data-box { fill: #F8FAFC; stroke: #CBD5E0; stroke-width: 2; }
      .arrow { stroke: #10B981; stroke-width: 3; fill: none; }
      .note-box { fill: #FEF2F2; stroke: #EF4444; stroke-width: 1; }
    </style>
    
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
      <path d="M0,0 L0,6 L12,3 z" fill="#10B981"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="600" fill="#FFFFFF"/>
  
  <!-- Title -->
  <text x="400" y="32" text-anchor="middle" class="title">図4-4：単一数値入力の内部処理フロー</text>
  
  <!-- Stage 1: Standard Input -->
  <g id="stage1">
    <rect x="50" y="70" width="700" height="80" rx="12" class="input-stage"/>
    <text x="70" y="95" class="emoji">📥</text>
    <text x="100" y="95" class="step-title" fill="#D97706">ステップ1：標準入力</text>
    
    <rect x="120" y="105" width="150" height="35" rx="8" class="data-box"/>
    <text x="125" y="125" class="data-text" fill="#4B5563">"42\n"</text>
    <text x="280" y="120" class="explanation-text">← ユーザーが「42」と入力してEnter</text>
    <text x="280" y="135" class="note-text">改行文字(\n)も含まれる</text>
    
    <rect x="500" y="105" width="200" height="35" rx="8" class="data-box"/>
    <text x="510" y="125" class="code-text">標準入力: "42\n"</text>
  </g>
  
  <!-- Arrow 1 -->
  <path d="M400 160 L400 190" class="arrow" marker-end="url(#arrow)"/>
  
  <!-- Stage 2: input() Function -->
  <g id="stage2">
    <rect x="50" y="200" width="700" height="80" rx="12" class="process-stage"/>
    <text x="70" y="225" class="emoji">🔄</text>
    <text x="100" y="225" class="step-title" fill="#1E40AF">ステップ2：input()関数の処理</text>
    
    <rect x="120" y="235" width="120" height="35" rx="8" class="data-box"/>
    <text x="125" y="255" class="data-text" fill="#4B5563">"42"</text>
    <text x="250" y="250" class="explanation-text">← 改行文字を自動で除去</text>
    <text x="250" y="265" class="type-text">型: str (文字列)</text>
    
    <rect x="450" y="235" width="200" height="35" rx="8" class="data-box"/>
    <text x="460" y="255" class="code-text">input() → "42"</text>
  </g>
  
  <!-- Arrow 2 -->
  <path d="M400 290 L400 320" class="arrow" marker-end="url(#arrow)"/>
  
  <!-- Stage 3: int() Function -->
  <g id="stage3">
    <rect x="50" y="330" width="700" height="80" rx="12" class="process-stage"/>
    <text x="70" y="355" class="emoji">🔢</text>
    <text x="100" y="355" class="step-title" fill="#1E40AF">ステップ3：int()関数による変換</text>
    
    <rect x="120" y="365" width="80" height="35" rx="8" class="data-box"/>
    <text x="130" y="385" class="data-text" fill="#4B5563">42</text>
    <text x="210" y="380" class="explanation-text">← 文字列"42"を整数42に変換</text>
    <text x="210" y="395" class="type-text">型: int (整数)</text>
    
    <rect x="450" y="365" width="200" height="35" rx="8" class="data-box"/>
    <text x="460" y="385" class="code-text">int("42") → 42</text>
  </g>
  
  <!-- Arrow 3 -->
  <path d="M400 420 L400 450" class="arrow" marker-end="url(#arrow)"/>
  
  <!-- Stage 4: Variable Storage -->
  <g id="stage4">
    <rect x="50" y="460" width="700" height="80" rx="12" class="store-stage"/>
    <text x="70" y="485" class="emoji">💾</text>
    <text x="100" y="485" class="step-title" fill="#059669">ステップ4：変数への格納</text>
    
    <rect x="120" y="495" width="120" height="35" rx="8" class="data-box"/>
    <text x="130" y="515" class="data-text" fill="#4B5563">n = 42</text>
    <text x="250" y="510" class="explanation-text">← 変数nに整数42が格納される</text>
    <text x="250" y="525" class="type-text">計算・比較が可能な状態</text>
    
    <rect x="450" y="495" width="250" height="35" rx="8" class="data-box"/>
    <text x="460" y="515" class="code-text">n = int(input())  # 完了</text>
  </g>
  
  <!-- Code Example -->
  <g id="code-example">
    <rect x="100" y="560" width="600" height="30" rx="8" class="note-box"/>
    <text x="120" y="580" class="emoji">💡</text>
    <text x="150" y="580" class="note-text">
      重要：input()は常に文字列を返すため、数値計算には必ずint()変換が必要
    </text>
  </g>
  
</svg>