<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <title>図6-6：複数データ検索の効率化</title>
  <desc>複数のデータを効率的に検索する方法の比較</desc>

  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-family="Inter, sans-serif" font-size="18" font-weight="bold" fill="#2c3e50">
    図6-6：複数データ検索の効率化
  </text>
  
  <!-- Problem statement -->
  <rect x="50" y="50" width="700" height="60" fill="#fff3cd" stroke="#ffc107" stroke-width="2" rx="5"/>
  <text x="70" y="75" font-family="Inter, sans-serif" font-size="14" font-weight="600" fill="#856404">
    問題：リスト [1,2,3,4,5,6,7,8,9,10] から [3,7,8] が含まれているかチェック
  </text>
  <text x="70" y="95" font-family="Inter, sans-serif" font-size="12" fill="#856404">
    どちらの方法が効率的？
  </text>
  
  <!-- Inefficient method -->
  <text x="50" y="150" font-family="Inter, sans-serif" font-size="16" font-weight="bold" fill="#e74c3c">
    ❌ 非効率な方法（リストのまま検索）
  </text>
  
  <rect x="50" y="160" width="700" height="120" fill="#ffebee" stroke="#e74c3c" stroke-width="2" rx="5"/>
  
  <!-- Code example -->
  <text x="70" y="185" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#2c3e50">
    data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
  </text>
  <text x="70" y="205" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#2c3e50">
    targets = [3, 7, 8]
  </text>
  <text x="70" y="230" font-family="Inter, sans-serif" font-size="12" fill="#2c3e50">
    for target in targets:
  </text>
  <text x="90" y="245" font-family="Inter, sans-serif" font-size="12" fill="#2c3e50">
    if target in data:  # ← 毎回O(N)の検索
  </text>
  <text x="110" y="260" font-family="Inter, sans-serif" font-size="12" fill="#2c3e50">
    print(f"{target}が見つかりました")
  </text>
  
  <!-- Performance analysis -->
  <rect x="470" y="185" width="250" height="80" fill="#fff" stroke="#e74c3c" stroke-width="1" rx="3"/>
  <text x="485" y="205" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#e74c3c">
    ⏱️ 計算量解析
  </text>
  <text x="485" y="225" font-family="Inter, sans-serif" font-size="11" fill="#2c3e50">
    各検索：O(N) × 検索回数：3回
  </text>
  <text x="485" y="240" font-family="Inter, sans-serif" font-size="11" fill="#2c3e50">
    全体：O(N×M) = O(10×3) = O(30)
  </text>
  <text x="485" y="255" font-family="Inter, sans-serif" font-size="11" font-weight="600" fill="#e74c3c">
    データが大きくなると非常に遅い
  </text>
  
  <!-- Efficient method -->
  <text x="50" y="320" font-family="Inter, sans-serif" font-size="16" font-weight="bold" fill="#27ae60">
    ✅ 効率的な方法（セットに変換してから検索）
  </text>
  
  <rect x="50" y="330" width="700" height="120" fill="#e8f5e8" stroke="#27ae60" stroke-width="2" rx="5"/>
  
  <!-- Code example -->
  <text x="70" y="355" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#2c3e50">
    data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
  </text>
  <text x="70" y="375" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#2c3e50">
    data_set = set(data)  # ← 一度だけO(N)でセットに変換
  </text>
  <text x="70" y="395" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#2c3e50">
    targets = [3, 7, 8]
  </text>
  <text x="70" y="420" font-family="Inter, sans-serif" font-size="12" fill="#2c3e50">
    for target in targets:
  </text>
  <text x="90" y="435" font-family="Inter, sans-serif" font-size="12" fill="#2c3e50">
    if target in data_set:  # ← 毎回O(1)の高速検索
  </text>
  <text x="110" y="450" font-family="Inter, sans-serif" font-size="12" fill="#2c3e50">
    print(f"{target}が見つかりました")
  </text>
  
  <!-- Performance analysis -->
  <rect x="470" y="355" width="250" height="80" fill="#fff" stroke="#27ae60" stroke-width="1" rx="3"/>
  <text x="485" y="375" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#27ae60">
    ⏱️ 計算量解析
  </text>
  <text x="485" y="395" font-family="Inter, sans-serif" font-size="11" fill="#2c3e50">
    セット変換：O(N) + 各検索：O(1)×3回
  </text>
  <text x="485" y="410" font-family="Inter, sans-serif" font-size="11" fill="#2c3e50">
    全体：O(N+M) = O(10+3) = O(13)
  </text>
  <text x="485" y="425" font-family="Inter, sans-serif" font-size="11" font-weight="600" fill="#27ae60">
    大幅な高速化を実現
  </text>
  
  <!-- Performance comparison graph -->
  <text x="400" y="490" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" font-weight="bold" fill="#2c3e50">
    データサイズと実行時間の比較
  </text>
  
  <g transform="translate(200, 500)">
    <!-- Axes -->
    <line x1="0" y1="0" x2="400" y2="0" stroke="#2c3e50" stroke-width="2"/>
    <line x1="0" y1="0" x2="0" y2="-80" stroke="#2c3e50" stroke-width="2"/>
    
    <!-- X-axis labels -->
    <text x="80" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="10" fill="#7f8c8d">100</text>
    <text x="160" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="10" fill="#7f8c8d">1000</text>
    <text x="240" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="10" fill="#7f8c8d">10000</text>
    <text x="320" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="10" fill="#7f8c8d">100000</text>
    
    <!-- Y-axis labels -->
    <text x="-10" y="-20" text-anchor="end" font-family="Inter, sans-serif" font-size="10" fill="#7f8c8d">速い</text>
    <text x="-10" y="-60" text-anchor="end" font-family="Inter, sans-serif" font-size="10" fill="#7f8c8d">遅い</text>
    
    <!-- Performance curves -->
    <!-- Inefficient method (linear growth) -->
    <path d="M 20 -5 L 80 -15 L 160 -35 L 240 -55 L 320 -75" 
          stroke="#e74c3c" stroke-width="3" fill="none"/>
    
    <!-- Efficient method (almost flat) -->
    <path d="M 20 -8 L 80 -10 L 160 -12 L 240 -14 L 320 -16" 
          stroke="#27ae60" stroke-width="3" fill="none"/>
    
    <!-- Legend -->
    <rect x="50" y="-75" width="180" height="40" fill="white" stroke="#bdc3c7" stroke-width="1"/>
    <line x1="60" y1="-60" x2="80" y2="-60" stroke="#e74c3c" stroke-width="2"/>
    <text x="85" y="-57" font-family="Inter, sans-serif" font-size="10" fill="#e74c3c">リスト検索</text>
    <line x1="60" y1="-45" x2="80" y2="-45" stroke="#27ae60" stroke-width="2"/>
    <text x="85" y="-42" font-family="Inter, sans-serif" font-size="10" fill="#27ae60">セット検索</text>
  </g>
  
  <!-- Key takeaway -->
  <rect x="50" y="580" width="700" height="15" fill="transparent"/>
  <text x="60" y="592" font-family="Inter, sans-serif" font-size="12" font-weight="600" fill="#2980b9">
    💡 多数回検索する場合は事前にセット変換することで大幅な高速化が可能
  </text>
</svg>