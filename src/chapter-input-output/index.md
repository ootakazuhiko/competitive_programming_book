<!-- 
本章は「中学生向け競技プログラミング入門書」の一部であり、
CC BY-NC-SA 4.0ライセンスの下で提供されます。
商用利用は事前許諾が必要です。
詳細：../../LICENSE.md
-->

---
title: "第4章：入出力処理を完全マスター"
layout: book
order: 4
---

# 第4章：入出力処理を完全マスター

## 章の学習目標

この章を読み終わることで、以下ができるようになります：
- 競技プログラミングでの入出力の特殊性を理解できる
- 様々な形式のデータを正確に読み込めるようになる
- 問題の要求に応じた適切な出力ができるようになる
- 入出力処理でよくあるエラーを回避できるようになる

競技プログラミングにおいて、入出力処理は最も基本的でありながら、最も重要な技術だ。どんなに素晴らしいアルゴリズムを思いついても、データを正しく読み込めなければ、正解にはたどり着けない。この章で、確実で効率的な入出力処理をマスターしよう。

## 4.1 入力って何？出力って何？

### Scratchとの対比による理解

![図4-1：ScratchとPythonの入出力対比]({{ site.baseurl }}/assets/diagrams/chapter4/figure4-1-scratch-python-io-comparison.svg)

### 競技プログラミングでの入出力の特殊性

一般的なプログラムと競技プログラミングでは、入出力の方式が大きく異なる：

![図4-2：一般プログラムと競技プログラムの入出力の違い]({{ site.baseurl }}/assets/diagrams/chapter4/figure4-2-general-vs-competitive-programming.svg)

### 標準入力・標準出力の概念

![図4-3：標準入力・標準出力のデータフロー]({{ site.baseurl }}/assets/diagrams/chapter4/figure4-3-standard-io-dataflow.svg)

AtCoderでは、この標準入力・標準出力を使って、自動的にプログラムをテストしている。君のプログラムに問題文の入力例を与えて、期待される出力例と一致するかをチェックしているんだ。

## 4.2 1つの数字を読み込もう

### 基本パターンの完全理解

最もシンプルな入力処理から始めよう。1つの整数を読み込む処理だ。

```
【図4-4：単一数値入力の内部処理フロー】

標準入力: "42\n"  ← \nは改行文字（見えない）
    ↓
input()関数: "42"  ← 文字列として取得（改行は除去）
    ↓
int()関数: 42  ← 整数として変換
    ↓
変数に格納: n = 42

コード例：
┌─────────────────────────────────────────────┐
│ # 入力例：42                                 │
│ n = int(input())                              │
│                                             │
│ 内部で起こっていること：                      │
│ 1. input() → "42" を返す（文字列）           │
│ 2. int("42") → 42 を返す（整数）             │
│ 3. n = 42 が確定                            │
│                                             │
│ print(n)      # 42 が出力される              │
│ print(n * 2)  # 84 が出力される              │
│ print(type(n)) # <class 'int'> が出力される  │
└─────────────────────────────────────────────┘
```

### なぜint()が必要なのか

この点は初心者がよく混乱するところだ。詳しく説明しよう：

```
【図4-5：文字列と数値の違いによる動作の差】

int()変換なしの場合：
┌─────────────────────────────────────────────┐
│ n = input()  # nは"42"（文字列）              │
│ print(n + n)  # "42" + "42" = "4242"（文字列結合）│
│ print(n * 2)  # "42" * 2 = "4242"（文字列繰り返し）│
│ print(n > 5)  # エラー！文字列と数値は比較できない│
└─────────────────────────────────────────────┘

int()変換ありの場合：
┌─────────────────────────────────────────────┐
│ n = int(input())  # nは42（整数）             │
│ print(n + n)  # 42 + 42 = 84（数値加算）      │
│ print(n * 2)  # 42 * 2 = 84（数値乗算）       │
│ print(n > 5)  # 42 > 5 = True（数値比較）     │
└─────────────────────────────────────────────┘

🎯 覚えるポイント：
• input()は必ず文字列を返す
• 数値として計算したい場合は必ずint()で変換
• 文字列のままだと予期しない動作になる
```

### 小数を読み込む場合

整数だけでなく、小数（浮動小数点数）を読み込む場合もある：

```
【図4-6：浮動小数点数の入力処理】

基本的な浮動小数点数の読み込み：
┌─────────────────────────────────────────────┐
│ # 入力例：3.14                               │
│ pi = float(input())                          │
│ print(pi)        # 3.14                     │
│ print(pi * 2)    # 6.28                     │
│ print(type(pi))  # <class 'float'>          │
└─────────────────────────────────────────────┘

整数か小数か分からない場合：
┌─────────────────────────────────────────────┐
│ # 問題文で「実数」と書かれている場合          │
│ x = float(input())                           │
│                                             │
│ # 入力が"5"でも"5.0"でも正しく処理される      │
│ # float("5") → 5.0                          │
│ # float("5.0") → 5.0                        │
│ # float("3.14") → 3.14                      │
└─────────────────────────────────────────────┘

💡 使い分けの指針：
• 問題文で「整数」→ int()を使用
• 問題文で「実数」「小数」→ float()を使用
• 迷った場合は問題文のサンプル入力を確認
```

## 4.3 複数の数字を読み込もう

### split()とmap()の組み合わせの理解

複数の数値が1行に書かれている場合の処理は、競技プログラミングで最もよく使うパターンだ。

```
【図4-7：複数数値入力の段階的処理】

入力: "3 5 2\n"
    ↓
input(): "3 5 2"  ← 改行文字は自動で除去
    ↓
.split(): ["3", "5", "2"]  ← 空白で分割、文字列のリスト
    ↓
map(int, ...): <map object>  ← 各要素をint()で変換するオブジェクト
    ↓
使用方法による分岐:

パターン1：個別変数に代入
a, b, c = map(int, input().split())
# a=3, b=5, c=2（それぞれ整数）

パターン2：リストとして取得
numbers = list(map(int, input().split()))
# numbers = [3, 5, 2]（整数のリスト）
```

### split()関数の詳細

```
【図4-8：split()関数の動作パターン】

基本的な使い方：
┌─────────────────────────────────────────────┐
│ text = "apple banana cherry"                 │
│ words = text.split()  # 空白で分割           │
│ print(words)  # ['apple', 'banana', 'cherry']│
└─────────────────────────────────────────────┘

区切り文字を指定：
┌─────────────────────────────────────────────┐
│ text = "1,2,3,4,5"                           │
│ numbers = text.split(',')  # カンマで分割     │
│ print(numbers)  # ['1', '2', '3', '4', '5']  │
└─────────────────────────────────────────────┘

空白の処理：
┌─────────────────────────────────────────────┐
│ text = "  1   2    3  "  # 不規則な空白      │
│ parts = text.split()    # 連続空白も1つとして扱う│
│ print(parts)  # ['1', '2', '3']             │
└─────────────────────────────────────────────┘

💡 重要な特徴：
• split()は必ず文字列のリストを返す
• 引数なしの場合、任意の空白文字で分割
• 連続する空白は1つの区切りとして扱われる
• 先頭・末尾の空白は自動で無視される
```

### map()関数の理解

![図4-9：map()関数による一括変換]({{ site.baseurl }}/assets/diagrams/chapter4/figure4-9-map-function-conversion.svg)

### 実践的な使い分け

```
【図4-10：複数入力の使い分けガイド】

📝 2-3個の値 → 個別変数（推奨）
┌─────────────────────────────────────────────┐
│ # 座標を読み込む場合                          │
│ x, y = map(int, input().split())              │
│ print(f"点({x}, {y})")                       │
│                                             │
│ # 範囲を読み込む場合                          │
│ start, end = map(int, input().split())        │
│ for i in range(start, end + 1):              │
│     print(i)                                │
│                                             │
│ # 3つの値の場合                             │
│ a, b, c = map(int, input().split())          │
│ print(max(a, b, c))                          │
└─────────────────────────────────────────────┘

📝 4個以上の値 → リスト（推奨）
┌─────────────────────────────────────────────┐
│ # N個の点数を読み込む場合                     │
│ n = int(input())                              │
│ scores = list(map(int, input().split()))      │
│ print(f"平均: {sum(scores) / len(scores)}")   │
│ print(f"最高: {max(scores)}")                │
│ print(f"最低: {min(scores)}")                │
│                                             │
│ # 可変個数の場合                             │
│ data = list(map(int, input().split()))        │
│ print(f"合計: {sum(data)}")                  │
│ print(f"要素数: {len(data)}")                │
└─────────────────────────────────────────────┘

⚠️ 避けるべきパターン：
┌─────────────────────────────────────────────┐
│ # 個数が分からないのに個別変数で受け取り       │
│ a, b, c, d, e = map(int, input().split())    │
│ # → 入力が3個しかないとエラーになる           │
│                                             │
│ # 2-3個なのにリストで受け取り               │
│ coords = list(map(int, input().split()))     │
│ x = coords[0]                                │
│ y = coords[1]                                │
│ # → x, y = map(int, input().split()) の方が簡潔│
└─────────────────────────────────────────────┘
```

## 4.4 繰り返し入力を処理しよう

### N行入力の標準パターン

競技プログラミングでは「N個のデータが1行ずつ与えられる」というパターンが非常に多い。

```
【図4-11：N行入力処理の基本形】

問題例：「N個の整数が1行ずつ与えられる」

入力例:
3      ← N（データの個数）
10     ← 1行目の数値
25     ← 2行目の数値  
13     ← 3行目の数値

基本コード：
┌─────────────────────────────────────────────┐
│ n = int(input())          # データ個数を読み込み│
│ numbers = []              # 結果格納用リスト  │
│ for i in range(n):        # N回繰り返し      │
│     x = int(input())      # 1行ずつ読み込み   │
│     numbers.append(x)     # リストに追加     │
│                                             │
│ # この時点で numbers = [10, 25, 13]         │
│ print(max(numbers))       # 最大値出力: 25   │
│ print(sum(numbers))       # 合計出力: 48     │
│ print(len(numbers))       # 個数出力: 3      │
└─────────────────────────────────────────────┘
```

### リスト内包表記による効率化

Pythonには、より簡潔に書ける「リスト内包表記」という機能がある：

```
【図4-12：リスト内包表記の活用】

基本形 → 内包表記への変換

❌ 冗長な書き方：
┌─────────────────────────────────────────────┐
│ n = int(input())                              │
│ numbers = []                                  │
│ for i in range(n):                            │
│     numbers.append(int(input()))              │
└─────────────────────────────────────────────┘

✅ 内包表記（推奨）：
┌─────────────────────────────────────────────┐
│ n = int(input())                              │
│ numbers = [int(input()) for _ in range(n)]    │
└─────────────────────────────────────────────┘

さらなる応用例：
┌─────────────────────────────────────────────┐
│ # 条件付きの読み込み                         │
│ n = int(input())                              │
│ positive_nums = [int(input()) for _ in range(n) if int(input()) > 0]│
│                                             │
│ # 複数行の座標データ                         │
│ n = int(input())                              │
│ points = [list(map(int, input().split())) for _ in range(n)]│
│ # points = [[1, 2], [3, 4], [5, 6]] など      │
└─────────────────────────────────────────────┘

💡 "_"（アンダースコア）の意味：
• 変数名として"_"を使うのは「値を使わない」という慣習
• range(n)のカウンタは必要だが、実際の値は使わない場合
• "i"でも動作するが、"_"の方がPython的で推奨される
```

### 複数行・複数列データの処理

```
【図4-13：2次元データの読み込みパターン】

問題例：「N行M列の数値が与えられる」

入力例:
3 4        ← N=3行, M=4列
1 2 3 4    ← 1行目のデータ
5 6 7 8    ← 2行目のデータ
9 10 11 12 ← 3行目のデータ

処理コード：
┌─────────────────────────────────────────────┐
│ n, m = map(int, input().split())              │
│ matrix = []                                   │
│ for i in range(n):                            │
│     row = list(map(int, input().split()))     │
│     matrix.append(row)                        │
│                                             │
│ # 結果: matrix = [[1,2,3,4], [5,6,7,8], [9,10,11,12]]│
│                                             │
│ # アクセス例                                 │
│ print(matrix[0][0])  # 1行1列目: 1            │
│ print(matrix[1][2])  # 2行3列目: 7            │
│ print(matrix[2][3])  # 3行4列目: 12           │
└─────────────────────────────────────────────┘

内包表記版：
┌─────────────────────────────────────────────┐
│ n, m = map(int, input().split())              │
│ matrix = [list(map(int, input().split())) for _ in range(n)]│
└─────────────────────────────────────────────┘

実用例：
┌─────────────────────────────────────────────┐
│ # 各行の合計を計算                           │
│ for i, row in enumerate(matrix):              │
│     print(f"{i+1}行目の合計: {sum(row)}")     │
│                                             │
│ # 全体の最大値を探索                         │
│ max_val = 0                                  │
│ for row in matrix:                           │
│     for val in row:                          │
│         max_val = max(max_val, val)          │
│ print(f"最大値: {max_val}")                  │
└─────────────────────────────────────────────┘
```

## 4.5 文字列入力を扱おう

### 文字列処理の基本パターン

数値だけでなく、文字列を扱う問題も多い。文字列の場合は`int()`変換は不要だ。

```
【図4-14：文字列入力の処理方法】

基本的な文字列入力：
┌─────────────────────────────────────────────┐
│ s = input()                # 1行を文字列として│
│ print(len(s))             # 文字数を出力     │
│ print(s.upper())          # 大文字に変換     │
│ print(s.lower())          # 小文字に変換     │
│ print(s[::-1])            # 文字列を逆順     │
└─────────────────────────────────────────────┘

複数の文字列を読み込み：
┌─────────────────────────────────────────────┐
│ # "apple banana cherry"のような入力         │
│ words = input().split()   # ['apple', 'banana', 'cherry']│
│ for word in words:                            │
│     print(f"単語: {word}, 長さ: {len(word)}")  │
└─────────────────────────────────────────────┘

1文字ずつの処理：
┌─────────────────────────────────────────────┐
│ s = input()               # "hello"          │
│ for i, char in enumerate(s):                  │
│     print(f"{i}番目の文字: {char}")           │
│                                             │
│ # 出力:                                     │
│ # 0番目の文字: h                            │
│ # 1番目の文字: e                            │
│ # 2番目の文字: l                            │
│ # 3番目の文字: l                            │
│ # 4番目の文字: o                            │
└─────────────────────────────────────────────┘
```

### 文字列と数値の混在入力

```
【図4-15：混在データの処理パターン】

問題例：「名前と年齢が空白区切りで与えられる」

入力例: "Alice 15"

処理方法：
┌─────────────────────────────────────────────┐
│ # 方法1: split()で分割してから個別に変換      │
│ line = input().split()                        │
│ name = line[0]           # 文字列のまま       │
│ age = int(line[1])       # 整数に変換         │
│ print(f"{name}さんは{age}歳です")             │
│                                             │
│ # 方法2: 直接代入（型が確定している場合）     │
│ name, age_str = input().split()               │
│ age = int(age_str)                            │
│ print(f"{name}さんは{age}歳です")             │
└─────────────────────────────────────────────┘

複雑な混在パターン：
┌─────────────────────────────────────────────┐
│ # "3 Alice Bob Charlie" のような入力         │
│ # 最初が個数、後ろが名前のリスト              │
│ data = input().split()                        │
│ n = int(data[0])         # 最初の要素は個数   │
│ names = data[1:]         # 2番目以降は名前    │
│                                             │
│ print(f"人数: {n}")                          │
│ for i, name in enumerate(names):              │
│     print(f"{i+1}番目: {name}")              │
└─────────────────────────────────────────────┘

注意が必要なパターン：
┌─────────────────────────────────────────────┐
│ # 文字列に空白が含まれる場合                  │
│ # 「"Hello World" 25」のような入力           │
│ # この場合、split()だけでは正しく分割できない │
│ # 問題文で入力形式を必ず確認すること          │
└─────────────────────────────────────────────┘
```

### 文字列操作の実践例

```
【図4-16：競技プログラミングでよく使う文字列操作】

パターン1：文字の出現回数カウント
┌─────────────────────────────────────────────┐
│ s = input()  # "programming"                 │
│ char_count = {}                               │
│ for char in s:                                │
│     if char in char_count:                    │
│         char_count[char] += 1                 │
│     else:                                     │
│         char_count[char] = 1                  │
│ print(char_count)                             │
│ # {'p': 1, 'r': 2, 'o': 1, 'g': 2, 'a': 1, 'm': 2, 'i': 1, 'n': 1}│
│                                             │
│ # より簡潔な書き方                           │
│ from collections import Counter               │
│ char_count = Counter(s)                       │
└─────────────────────────────────────────────┘

パターン2：回文（palindrome）判定
┌─────────────────────────────────────────────┐
│ s = input()  # "racecar"                     │
│ if s == s[::-1]:                              │
│     print("回文です")                         │
│ else:                                         │
│     print("回文ではありません")                │
│                                             │
│ # 大文字小文字を区別しない回文判定            │
│ s = input().lower()                           │
│ if s == s[::-1]:                              │
│     print("回文です（大小文字無視）")           │
└─────────────────────────────────────────────┘

パターン3：文字列の置換・加工
┌─────────────────────────────────────────────┐
│ s = input()  # "Hello World"                 │
│ s = s.replace(" ", "_")      # "Hello_World"  │
│ s = s.replace("o", "0")      # "Hell0_W0rld"  │
│ s = s.lower()               # "hell0_w0rld"  │
│ words = s.split("_")        # ["hell0", "w0rld"]│
│ print("_".join(words))      # "hell0_w0rld"   │
└─────────────────────────────────────────────┘
```

## 4.6 出力フォーマットをマスターしよう

### print()関数の詳細オプション

出力処理も入力と同じくらい重要だ。AtCoderでは出力形式が厳密に指定されるため、正確な出力が必要だ。

![図4-17：print()関数の完全活用]({{ site.baseurl }}/assets/diagrams/chapter4/figure4-17-print-function-complete-usage.svg)

### 問題別出力パターン

```
【図4-18：競技プログラミングでよくある出力パターン】

パターン1: リストの要素を1行で出力
┌─────────────────────────────────────────────┐
│ numbers = [1, 2, 3, 4, 5]                    │
│                                             │
│ # 方法1: *演算子を使用（推奨）                │
│ print(*numbers)          # 1 2 3 4 5        │
│                                             │
│ # 方法2: join()を使用                       │
│ print(' '.join(map(str, numbers)))  # 1 2 3 4 5│
│                                             │
│ # 方法3: sepパラメータを使用                 │
│ print(numbers[0], numbers[1], numbers[2], numbers[3], numbers[4])│
│ # 要素数が変動する場合は使えない              │
└─────────────────────────────────────────────┘

パターン2: リストの要素を1行ずつ出力
┌─────────────────────────────────────────────┐
│ numbers = [10, 20, 30]                       │
│                                             │
│ # 方法1: forループ（推奨）                   │
│ for num in numbers:                          │
│     print(num)                               │
│ # 出力:                                     │
│ # 10                                        │
│ # 20                                        │
│ # 30                                        │
│                                             │
│ # 方法2: join()を使用                       │
│ print('\n'.join(map(str, numbers)))          │
└─────────────────────────────────────────────┘

パターン3: 条件付き出力
┌─────────────────────────────────────────────┐
│ n = int(input())                             │
│ if n % 2 == 0:                               │
│     print("Even")        # 大文字小文字注意  │
│ else:                                        │
│     print("Odd")         # 問題文と一致させる│
│                                             │
│ # Yes/Noの出力                              │
│ if condition:                                │
│     print("Yes")         # "YES"ではない    │
│ else:                                        │
│     print("No")          # "NO"ではない     │
└─────────────────────────────────────────────┘

パターン4: 小数点の制御
┌─────────────────────────────────────────────┐
│ import math                                  │
│ pi = math.pi             # 3.141592653589793 │
│                                             │
│ # 小数点以下2桁で出力                        │
│ print(f"{pi:.2f}")       # 3.14             │
│                                             │
│ # 小数点以下6桁で出力                        │
│ print(f"{pi:.6f}")       # 3.141593         │
│                                             │
│ # 問題文で「小数点以下3桁」と指定された場合   │
│ result = 7 / 3           # 2.3333333333333335│
│ print(f"{result:.3f}")   # 2.333            │
└─────────────────────────────────────────────┘
```

### 出力でよくあるミス

```
【図4-19：出力の典型的な間違いパターン】

❌ ミス1: 余分な文字・説明の出力
┌─────────────────────────────────────────────┐
│ # 問題：「答えを出力しなさい」                │
│ answer = 42                                  │
│ print("答えは", answer)    # ❌ 余分な説明    │
│ print(f"答え: {answer}")   # ❌ 余分な説明    │
│ print(answer)             # ✅ 正解         │
└─────────────────────────────────────────────┘

❌ ミス2: 改行の制御ミス
┌─────────────────────────────────────────────┐
│ # 問題：「a bを1行で出力」                   │
│ a, b = 1, 2                                  │
│ print(a)                                     │
│ print(b)                  # ❌ 2行になってしまう│
│                                             │
│ print(a, b)               # ✅ 正解: "1 2"   │
└─────────────────────────────────────────────┘

❌ ミス3: 大文字小文字の間違い
┌─────────────────────────────────────────────┐
│ # 問題文で"Yes"と指定されている場合          │
│ if condition:                                │
│     print("yes")          # ❌ 小文字       │
│     print("YES")          # ❌ 大文字       │
│     print("Yes")          # ✅ 正解         │
└─────────────────────────────────────────────┘

❌ ミス4: 区切り文字の間違い
┌─────────────────────────────────────────────┐
│ # 問題：「カンマ区切りで出力」                │
│ numbers = [1, 2, 3]                          │
│ print(*numbers)           # ❌ "1 2 3"      │
│ print(','.join(map(str, numbers)))  # ✅ "1,2,3"│
│                                             │
│ # 問題：「空白区切りで出力」                  │
│ print(','.join(map(str, numbers)))  # ❌ "1,2,3"│
│ print(*numbers)           # ✅ "1 2 3"      │
└─────────────────────────────────────────────┘

🛡️ 出力ミス防止チェックリスト：
1. サンプル出力を文字単位で確認
2. 余計な説明文字がないか確認
3. 改行・スペース・区切り文字が正確か確認
4. 大文字小文字が問題文と一致するか確認
5. 小数点以下の桁数が指定通りか確認
```

## まとめ：入出力処理の完全マスター達成！

この章では、競技プログラミングにおける入出力処理のすべてを学んだ。

```
【図4-20：この章で身につけたスキル】

🎯 習得したスキル
┌─────────────────────────────────────────────┐
│ ✅ 単一数値・複数数値の正確な読み込み         │
│ ✅ 繰り返し入力・2次元データの処理           │
│ ✅ 文字列入力と数値の混在データの処理        │
│ ✅ 様々な出力形式への対応                   │
│ ✅ よくある入出力エラーの回避と対処          │
└─────────────────────────────────────────────┘

🚀 次のステップ
┌─────────────────────────────────────────────┐
│ 第5章: 基本アルゴリズムの道具箱               │
│ • 問題解決のための基本的な手法を学習          │
│ • 全探索・ソート・貪欲法などの習得           │
│ • 実際の問題での活用方法を理解              │
└─────────────────────────────────────────────┘
```

入出力処理は、競技プログラミングにおける「基礎の基礎」だ。どんなに高度なアルゴリズムを知っていても、データを正しく読み込み、正確に出力できなければ、正解にはたどり着けない。

この章で学んだ技術は、今後のすべての問題で使うことになる。特に以下のパターンは頻繁に使うので、しっかりと覚えておこう：

- `n = int(input())` - 単一整数の読み込み
- `a, b = map(int, input().split())` - 複数整数の読み込み
- `numbers = [int(input()) for _ in range(n)]` - N行の整数読み込み
- `print(*list)` - リストの要素をスペース区切りで出力

次の章では、いよいよアルゴリズムの世界に足を踏み入れよう。問題を効率的に解くための「道具箱」を手に入れることで、君の競技プログラミングスキルは大きく飛躍するはずだ！
